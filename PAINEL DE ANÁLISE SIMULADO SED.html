<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Análise de Resultados - Simulado SAEB</title>
    

    <script src="https://cdn.tailwindcss.com"></script>
    
   
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: all 0.3s ease-in-out;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #1d4ed8;
        }
        .form-select {
            border-radius: 0.5rem;
            border-color: #d1d5db;
        }
        .traffic-light-dot {
            height: 1rem;
            width: 1rem;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
        }
        /* Novas cores e classes */
        .bg-baixo { background-color: #ef4444; }
        .bg-basico { background-color: #f59e0b; }
        .bg-proficiente { background-color: #22c55e; }
        .bg-avancado { background-color: #3b82f6; }

        .text-baixo { color: #b91c1c; }
        .text-basico { color: #b45309; }

        .border-baixo { border-left-color: #ef4444; }
        .border-basico { border-left-color: #f59e0b; }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <!-- Cabeçalho -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Painel de Análise de Resultados</h1>
           </header>

        <!-- Seção de Seleção -->
        <div id="selection-section" class="card p-6 md:p-8 max-w-4xl mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
                <div>
                    <label for="anoSelect" class="block text-sm font-medium text-gray-700">Ano/Série</label>
                    <select id="anoSelect" class="form-select mt-1 block w-full">
                        <option value="9ano">9º Ano</option>
                        <option value="3ano">3º Ano</option>
                    </select>
                </div>
                <div>
                    <label for="turmaSelect" class="block text-sm font-medium text-gray-700">Turma</label>
                    <select id="turmaSelect" class="form-select mt-1 block w-full">
                        <!-- Opções preenchidas dinamicamente -->
                    </select>
                </div>
                <div>
                    <label for="disciplinaSelect" class="block text-sm font-medium text-gray-700">Disciplina</label>
                    <select id="disciplinaSelect" class="form-select mt-1 block w-full">
                        <option value="lp">Língua Portuguesa</option>
                        <option value="mat">Matemática</option>
                    </select>
                </div>
                <div class="text-center md:text-left">
                    <button id="analyzeBtn" class="btn-primary w-full md:w-auto inline-flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M12 20V10"></path><path d="M18 20V4"></path><path d="M6 20V16"></path></svg>
                        Gerar Análise
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mensagem de erro/aviso -->
        <div id="message-div" class="hidden mt-6 max-w-4xl mx-auto p-4 rounded-md" role="alert">
            <p class="font-bold" id="message-title"></p>
            <p id="message-text"></p>
        </div>

      
        <div id="results-section" class="hidden mt-10">
            <div class="card p-6 md:p-8">
                <h2 id="chart-title" class="text-2xl font-semibold mb-4 text-center"></h2>
                <div class="mb-4 flex flex-wrap justify-center gap-x-4 gap-y-2 text-sm text-gray-700">
                    <div class="flex items-center"><span class="traffic-light-dot bg-baixo"></span>0-40% (Baixo)</div>
                    <div class="flex items-center"><span class="traffic-light-dot bg-basico"></span>41-60% (Básico)</div>
                    <div class="flex items-center"><span class="traffic-light-dot bg-proficiente"></span>61-80% (Proficiente)</div>
                    <div class="flex items-center"><span class="traffic-light-dot bg-avancado"></span>81-100% (Avançado)</div>
                </div>
                <div style="height: 500px;">
                    <canvas id="saebChart"></canvas>
                </div>
            </div>

            <div class="card p-6 md:p-8 mt-10">
                <h2 class="text-2xl font-semibold mb-6 text-center">Análise Pedagógica e Intervenções</h2>
                <div id="analysis-container"></div>
            </div>
        </div>

    </div>

    <script>
        // --- BANCO DE DADOS ---
        const allData = {
            '9ano': {
                'lp': {
                    'turma1': [
                        { descritor: 'D6', percentual: 100 }, { descritor: 'D12', percentual: 100 }, { descritor: 'D16', percentual: 96.88 }, { descritor: 'D1', percentual: 96.88 }, { descritor: 'D2', percentual: 96.88 }, { descritor: 'D4', percentual: 93.75 }, { descritor: 'D11', percentual: 93.75 }, { descritor: 'D10', percentual: 92.19 }, { descritor: 'D21', percentual: 87.5 }, { descritor: 'D8', percentual: 87.5 }, { descritor: 'D18', percentual: 84.38 }, { descritor: 'D5', percentual: 82.81 }, { descritor: 'D3', percentual: 75 }, { descritor: 'D9', percentual: 68.75 }, { descritor: 'D13', percentual: 68.75 }, { descritor: 'D14', percentual: 62.5 }, { descritor: 'D20', percentual: 62.5 }, { descritor: 'D19', percentual: 50 }, { descritor: 'D17', percentual: 43.75 }, { descritor: 'D15', percentual: 26.56 }, { descritor: 'D7', percentual: 25 }
                    ],
                    'turma2': [
                        { descritor: 'D12', percentual: 100 }, { descritor: 'D6', percentual: 96.97 }, { descritor: 'D1', percentual: 93.94 }, { descritor: 'D5', percentual: 87.88 }, { descritor: 'D4', percentual: 87.88 }, { descritor: 'D2', percentual: 87.88 }, { descritor: 'D21', percentual: 84.85 }, { descritor: 'D16', percentual: 84.85 }, { descritor: 'D8', percentual: 81.82 }, { descritor: 'D3', percentual: 78.79 }, { descritor: 'D10', percentual: 78.79 }, { descritor: 'D11', percentual: 78.79 }, { descritor: 'D18', percentual: 77.27 }, { descritor: 'D14', percentual: 66.67 }, { descritor: 'D9', percentual: 66.67 }, { descritor: 'D13', percentual: 63.64 }, { descritor: 'D19', percentual: 57.58 }, { descritor: 'D20', percentual: 57.58 }, { descritor: 'D17', percentual: 36.36 }, { descritor: 'D15', percentual: 22.73 }, { descritor: 'D7', percentual: 18.18 }
                    ], 
                    'turma3': [
                        { descritor: 'D12', percentual: 95.45 }, { descritor: 'D6', percentual: 90.91 }, { descritor: 'D1', percentual: 90.91 }, { descritor: 'D4', percentual: 86.36 }, { descritor: 'D2', percentual: 81.82 }, { descritor: 'D16', percentual: 77.27 }, { descritor: 'D21', percentual: 72.73 }, { descritor: 'D3', percentual: 72.73 }, { descritor: 'D5', percentual: 72.73 }, { descritor: 'D18', percentual: 68.18 }, { descritor: 'D10', percentual: 68.18 }, { descritor: 'D8', percentual: 63.64 }, { descritor: 'D11', percentual: 63.64 }, { descritor: 'D19', percentual: 61.36 }, { descritor: 'D14', percentual: 59.09 }, { descritor: 'D9', percentual: 45.45 }, { descritor: 'D15', percentual: 43.18 }, { descritor: 'D17', percentual: 40.91 }, { descritor: 'D20', percentual: 36.36 }, { descritor: 'D13', percentual: 36.36 }, { descritor: 'D7', percentual: 13.64 }
                    ], 
                    'turma4': [
                        { descritor: 'D12', percentual: 96.43 }, { descritor: 'D4', percentual: 85.71 }, { descritor: 'D16', percentual: 85.71 }, { descritor: 'D1', percentual: 85.71 }, { descritor: 'D2', percentual: 82.14 }, { descritor: 'D6', percentual: 78.57 }, { descritor: 'D8', percentual: 78.57 }, { descritor: 'D9', percentual: 78.57 }, { descritor: 'D11', percentual: 78.57 }, { descritor: 'D5', percentual: 73.21 }, { descritor: 'D18', percentual: 71.43 }, { descritor: 'D10', percentual: 69.64 }, { descritor: 'D14', percentual: 67.86 }, { descritor: 'D3', percentual: 67.86 }, { descritor: 'D21', percentual: 64.29 }, { descritor: 'D13', percentual: 60.71 }, { descritor: 'D20', percentual: 50 }, { descritor: 'D19', percentual: 46.43 }, { descritor: 'D15', percentual: 41.07 }, { descritor: 'D17', percentual: 39.29 }, { descritor: 'D7', percentual: 25 }
                    ]
                },
                'mat': { 
                    'turma1': [
                        { descritor: 'D37', percentual: 78.13 }, { descritor: 'D2', percentual: 78.13 }, { descritor: 'D24', percentual: 76.56 }, { descritor: 'D16', percentual: 71.88 }, { descritor: 'D20', percentual: 50 }, { descritor: 'D36', percentual: 46.88 }, { descritor: 'D12', percentual: 46.88 }, { descritor: 'D17', percentual: 43.75 }, { descritor: 'D26', percentual: 43.75 }, { descritor: 'D31', percentual: 40.63 }, { descritor: 'D6', percentual: 37.5 }, { descritor: 'D10', percentual: 34.38 }, { descritor: 'D35', percentual: 31.25 }, { descritor: 'D25', percentual: 31.25 }, { descritor: 'D18', percentual: 31.25 }, { descritor: 'D29', percentual: 28.13 }, { descritor: 'D33', percentual: 28.13 }, { descritor: 'D1', percentual: 25 }, { descritor: 'D28', percentual: 21.88 }, { descritor: 'D13', percentual: 21.88 }, { descritor: 'D23', percentual: 18.75 }, { descritor: 'D34', percentual: 15.63 }, { descritor: 'D3', percentual: 6.25 }
                    ], 
                    'turma2': [
                        { descritor: 'D16', percentual: 75.76 }, { descritor: 'D18', percentual: 66.67 }, { descritor: 'D24', percentual: 62.12 }, { descritor: 'D37', percentual: 60.61 }, { descritor: 'D2', percentual: 60.61 }, { descritor: 'D36', percentual: 53.03 }, { descritor: 'D29', percentual: 48.48 }, { descritor: 'D12', percentual: 48.48 }, { descritor: 'D20', percentual: 46.97 }, { descritor: 'D31', percentual: 42.42 }, { descritor: 'D35', percentual: 39.39 }, { descritor: 'D33', percentual: 36.36 }, { descritor: 'D6', percentual: 36.36 }, { descritor: 'D17', percentual: 30.3 }, { descritor: 'D10', percentual: 27.27 }, { descritor: 'D23', percentual: 24.24 }, { descritor: 'D26', percentual: 24.24 }, { descritor: 'D28', percentual: 24.24 }, { descritor: 'D25', percentual: 21.21 }, { descritor: 'D34', percentual: 21.21 }, { descritor: 'D1', percentual: 21.21 }, { descritor: 'D3', percentual: 12.12 }, { descritor: 'D13', percentual: 9.09 }
                    ], 
                    'turma3': [
                        { descritor: 'D37', percentual: 68.18 }, { descritor: 'D16', percentual: 59.09 }, { descritor: 'D2', percentual: 54.55 }, { descritor: 'D24', percentual: 45.45 }, { descritor: 'D31', percentual: 45.45 }, { descritor: 'D36', percentual: 43.18 }, { descritor: 'D1', percentual: 40.91 }, { descritor: 'D18', percentual: 40.91 }, { descritor: 'D20', percentual: 38.64 }, { descritor: 'D34', percentual: 36.36 }, { descritor: 'D12', percentual: 36.36 }, { descritor: 'D25', percentual: 31.82 }, { descritor: 'D17', percentual: 27.27 }, { descritor: 'D26', percentual: 27.27 }, { descritor: 'D29', percentual: 27.27 }, { descritor: 'D10', percentual: 27.27 }, { descritor: 'D28', percentual: 18.18 }, { descritor: 'D13', percentual: 18.18 }, { descritor: 'D33', percentual: 13.64 }, { descritor: 'D6', percentual: 13.64 }, { descritor: 'D35', percentual: 9.09 }, { descritor: 'D3', percentual: 9.09 }, { descritor: 'D23', percentual: 4.55 }
                    ], 
                    'turma4': [
                        { descritor: 'D16', percentual: 78.57 }, { descritor: 'D24', percentual: 60.71 }, { descritor: 'D2', percentual: 60.71 }, { descritor: 'D36', percentual: 58.93 }, { descritor: 'D20', percentual: 57.14 }, { descritor: 'D37', percentual: 57.14 }, { descritor: 'D12', percentual: 50 }, { descritor: 'D31', percentual: 46.43 }, { descritor: 'D35', percentual: 39.29 }, { descritor: 'D6', percentual: 39.29 }, { descritor: 'D18', percentual: 39.29 }, { descritor: 'D29', percentual: 35.71 }, { descritor: 'D1', percentual: 35.71 }, { descritor: 'D28', percentual: 32.14 }, { descritor: 'D17', percentual: 25 }, { descritor: 'D26', percentual: 21.43 }, { descritor: 'D33', percentual: 21.43 }, { descritor: 'D3', percentual: 17.86 }, { descritor: 'D10', percentual: 17.86 }, { descritor: 'D25', percentual: 17.86 }, { descritor: 'D34', percentual: 14.29 }, { descritor: 'D13', percentual: 14.29 }, { descritor: 'D23', percentual: 7.14 }
                    ]
                }
            },
            '3ano': {
                'lp': { 
                    'turma1': [
                        { descritor: 'D4', percentual: 95.45 }, { descritor: 'D14', percentual: 90.91 }, { descritor: 'D20', percentual: 90.91 }, { descritor: 'D21', percentual: 90.91 }, { descritor: 'D5', percentual: 90.91 }, { descritor: 'D1', percentual: 84.09 }, { descritor: 'D8', percentual: 81.82 }, { descritor: 'D11', percentual: 81.82 }, { descritor: 'D12', percentual: 77.27 }, { descritor: 'D10', percentual: 72.73 }, { descritor: 'D19', percentual: 68.18 }, { descritor: 'D6', percentual: 59.09 }, { descritor: 'D7', percentual: 59.09 }, { descritor: 'D15', percentual: 52.27 }, { descritor: 'D16', percentual: 47.73 }, { descritor: 'D17', percentual: 45.45 }, { descritor: 'D3', percentual: 45.45 }, { descritor: 'D9', percentual: 40.91 }, { descritor: 'D18', percentual: 36.36 }, { descritor: 'D2', percentual: 31.82 }, { descritor: 'D13', percentual: 13.64 }
                    ], 
                    'turma2': [
                        { descritor: 'D20', percentual: 89.66 }, { descritor: 'D11', percentual: 75.86 }, { descritor: 'D1', percentual: 74.14 }, { descritor: 'D14', percentual: 72.41 }, { descritor: 'D5', percentual: 72.41 }, { descritor: 'D8', percentual: 72.41 }, { descritor: 'D4', percentual: 72.41 }, { descritor: 'D21', percentual: 68.97 }, { descritor: 'D12', percentual: 68.97 }, { descritor: 'D19', percentual: 62.07 }, { descritor: 'D17', percentual: 58.62 }, { descritor: 'D6', percentual: 55.17 }, { descritor: 'D10', percentual: 55.17 }, { descritor: 'D16', percentual: 51.72 }, { descritor: 'D9', percentual: 48.28 }, { descritor: 'D7', percentual: 41.38 }, { descritor: 'D3', percentual: 36.21 }, { descritor: 'D15', percentual: 32.76 }, { descritor: 'D2', percentual: 24.14 }, { descritor: 'D18', percentual: 20.69 }, { descritor: 'D13', percentual: 20.69 }
                    ], 
                    'turma3': [
                        { descritor: 'D20', percentual: 82.14 }, { descritor: 'D5', percentual: 82.14 }, { descritor: 'D11', percentual: 78.57 }, { descritor: 'D4', percentual: 75 }, { descritor: 'D1', percentual: 73.21 }, { descritor: 'D14', percentual: 71.43 }, { descritor: 'D21', percentual: 67.86 }, { descritor: 'D12', percentual: 66.07 }, { descritor: 'D19', percentual: 64.29 }, { descritor: 'D8', percentual: 57.14 }, { descritor: 'D17', percentual: 53.57 }, { descritor: 'D10', percentual: 53.57 }, { descritor: 'D15', percentual: 50 }, { descritor: 'D6', percentual: 46.43 }, { descritor: 'D9', percentual: 46.43 }, { descritor: 'D3', percentual: 44.64 }, { descritor: 'D16', percentual: 41.07 }, { descritor: 'D7', percentual: 35.71 }, { descritor: 'D18', percentual: 32.14 }, { descritor: 'D2', percentual: 28.57 }, { descritor: 'D13', percentual: 21.43 }
                    ]
                },
                'mat': { 
                    'turma1': [
                        { descritor: 'D6', percentual: 77.27 }, { descritor: 'D14', percentual: 68.18 }, { descritor: 'D16', percentual: 54.55 }, { descritor: 'D34', percentual: 54.55 }, { descritor: 'D31', percentual: 50 }, { descritor: 'D19', percentual: 45.45 }, { descritor: 'D2', percentual: 45.45 }, { descritor: 'D23', percentual: 45.45 }, { descritor: 'D18', percentual: 45.45 }, { descritor: 'D5', percentual: 40.91 }, { descritor: 'D21', percentual: 40.91 }, { descritor: 'D1', percentual: 36.36 }, { descritor: 'D17', percentual: 31.82 }, { descritor: 'D15', percentual: 31.82 }, { descritor: 'D20', percentual: 27.27 }, { descritor: 'D4', percentual: 27.27 }, { descritor: 'D9', percentual: 22.73 }, { descritor: 'D25', percentual: 22.73 }, { descritor: 'D22', percentual: 18.18 }, { descritor: 'D32', percentual: 18.18 }, { descritor: 'D11', percentual: 18.18 }, { descritor: 'D24', percentual: 13.64 }, { descritor: 'D29', percentual: 13.64 }, { descritor: 'D12', percentual: 13.64 }, { descritor: 'D8', percentual: 4.55 }
                    ], 
                    'turma2': [
                        { descritor: 'D6', percentual: 72.41 }, { descritor: 'D16', percentual: 62.07 }, { descritor: 'D14', percentual: 58.62 }, { descritor: 'D2', percentual: 48.28 }, { descritor: 'D15', percentual: 48.28 }, { descritor: 'D5', percentual: 44.83 }, { descritor: 'D1', percentual: 44.83 }, { descritor: 'D31', percentual: 41.38 }, { descritor: 'D17', percentual: 41.38 }, { descritor: 'D34', percentual: 37.93 }, { descritor: 'D20', percentual: 34.48 }, { descritor: 'D25', percentual: 34.48 }, { descritor: 'D19', percentual: 31.03 }, { descritor: 'D23', percentual: 31.03 }, { descritor: 'D21', percentual: 31.03 }, { descritor: 'D32', percentual: 27.59 }, { descritor: 'D12', percentual: 24.14 }, { descritor: 'D4', percentual: 20.69 }, { descritor: 'D22', percentual: 17.24 }, { descritor: 'D24', percentual: 17.24 }, { descritor: 'D11', percentual: 13.79 }, { descritor: 'D9', percentual: 10.34 }, { descritor: 'D29', percentual: 17.24 }, { descritor: 'D18', percentual: 37.93 }, { descritor: 'D8', percentual: 17.24 }
                    ], 
                    'turma3': [
                        { descritor: 'D16', percentual: 64.29 }, { descritor: 'D6', percentual: 60.71 }, { descritor: 'D9', percentual: 53.57 }, { descritor: 'D14', percentual: 50 }, { descritor: 'D18', percentual: 46.43 }, { descritor: 'D2', percentual: 42.86 }, { descritor: 'D23', percentual: 42.86 }, { descritor: 'D34', percentual: 42.86 }, { descritor: 'D5', percentual: 42.86 }, { descritor: 'D21', percentual: 42.86 }, { descritor: 'D20', percentual: 35.71 }, { descritor: 'D1', percentual: 35.71 }, { descritor: 'D4', percentual: 35.71 }, { descritor: 'D15', percentual: 35.71 }, { descritor: 'D19', percentual: 32.14 }, { descritor: 'D22', percentual: 28.57 }, { descritor: 'D12', percentual: 28.57 }, { descritor: 'D29', percentual: 25 }, { descritor: 'D32', percentual: 17.86 }, { descritor: 'D24', percentual: 10.71 }, { descritor: 'D11', percentual: 7.14 }, { descritor: 'D17', percentual: 39.29 }, { descritor: 'D25', percentual: 10.71 }, { descritor: 'D31', percentual: 39.29 }, { descritor: 'D8', percentual: 10.71 }
                    ]
                }
            }
        };

        const pedagogicalAnalysis = {
            // --- LÍNGUA PORTUGUESA ---
            'D1': { title: 'D1 - Localizar informações explícitas em um texto.', analysis: 'Habilidade de leitura fundamental. Dificuldades aqui podem indicar falta de atenção ou problemas básicos de decodificação. É o primeiro nível de compreensão textual.', suggestions: { title: 'Sugestões', items: ['Jogos de "detetive do texto", com perguntas diretas.', 'Uso de marcadores de texto para destacar respostas.'] } },
            'D2': { title: 'D2 - Estabelecer relações entre partes de um texto (repetições/substituições).', analysis: 'Avalia a capacidade de entender a coesão textual, percebendo como pronomes e sinônimos evitam repetições e mantêm o texto fluido. Essencial para a compreensão global.', suggestions: { title: 'Sugestões', items: ['Atividade de ligar pronomes (ele, ela, isso) às palavras que eles substituem.', 'Reescrita de frases para substituir termos repetidos.'] } },
            'D3': { title: 'D3 - Inferir o sentido de uma palavra ou expressão.', analysis: 'Mede a habilidade de usar o contexto para descobrir significados. Uma dificuldade aqui pode limitar o vocabulário e a compreensão de textos mais ricos.', suggestions: { title: 'Sugestões', items: ['Leitura de textos com palavras desconhecidas, incentivando a adivinhação pelo contexto antes de usar o dicionário.', 'Criar glossários colaborativos.'] } },
            'D4': { title: 'D4 - Inferir uma informação implícita em um texto.', analysis: 'Capacidade de "ler nas entrelinhas". Um baixo desempenho indica uma leitura muito literal. É crucial para a interpretação de ironias, críticas e subtextos.', suggestions: { title: 'Sugestões', items: ['Análise de fábulas para descobrir a "moral da história".', 'Discussão sobre as intenções dos personagens em contos e crônicas.'] } },
            'D5': { title: 'D5 - Interpretar texto com auxílio de material gráfico diverso.', analysis: 'Habilidade de leitura multimodal. Dificuldades mostram que o aluno pode ignorar gráficos, tabelas e imagens, perdendo informações essenciais.', connections: { title: 'Conexões', items: ['<strong>Geografia/Ciências:</strong> Leitura de mapas, gráficos climáticos e infográficos científicos.', '<strong>História:</strong> Análise de charges e fotografias históricas.'] }, suggestions: { title: 'Sugestões', items: ['Criar perguntas cujas respostas só podem ser encontradas nos elementos gráficos do texto.', 'Pedir que os alunos criem seus próprios infográficos.'] } },
            'D6': { title: 'D6 - Identificar o tema de um texto.', analysis: 'Síntese da ideia principal. Um problema aqui significa que o aluno se perde nos detalhes e não consegue identificar o assunto central do que leu.', suggestions: { title: 'Sugestões', items: ['Após a leitura, pedir que deem um novo título para o texto.', 'Atividade de resumir um parágrafo em uma única frase.'] } },
            'D7': { title: 'D7 - Identificar a tese de um texto.', analysis: 'Ponto crítico em textos argumentativos. A dificuldade impede o aluno de identificar a opinião principal que o autor está defendendo, confundindo-a com os argumentos.', connections: { title: 'Conexões', items: ['<strong>Ciências Humanas:</strong> Em História, analisar a tese de um historiador sobre um evento. Em Geografia, identificar o ponto de vista defendido em um artigo sobre questões socioambientais.'] }, suggestions: { title: 'Sugestões', items: ['Comparar textos com teses opostas sobre o mesmo assunto.', 'Destacar a tese em editoriais de jornais e artigos.'] } },
            'D8': { title: 'D8 - Estabelecer relação entre a tese e os argumentos.', analysis: 'Complementa o D7. O aluno pode até encontrar a tese, mas não entende como os argumentos (exemplos, dados, fatos) a sustentam. Essencial para o pensamento crítico.', suggestions: { title: 'Sugestões', items: ['Criar "mapas argumentativos", ligando a tese central aos argumentos que a suportam.', 'Analisar propagandas para identificar a "tese" (compre meu produto) e os argumentos usados.'] } },
            'D9': { title: 'D9 - Diferenciar as partes principais das secundárias em um texto.', analysis: 'Habilidade de hierarquizar informações. Dificuldades aqui levam a resumos ineficazes, onde o aluno dá a mesma importância para um detalhe e para a ideia principal.', suggestions: { title: 'Sugestões', items: ['Técnica de sublinhar: uma cor para ideias principais, outra para secundárias.', 'Transformar textos corridos em esquemas de tópicos.'] } },
            'D10': { title: 'D10 - Identificar o conflito gerador do enredo.', analysis: 'Coração da narrativa. Se o aluno não identifica o problema central da história, toda a estrutura de apresentação, desenvolvimento e clímax perde o sentido.', suggestions: { title: 'Sugestões', items: ['Analisar sinopses de filmes para identificar o conflito principal.', 'Pedir que recontem uma história a partir do seu conflito.'] } },
            'D11': { title: 'D11 - Estabelecer relação causa/consequência.', analysis: 'Estrutura lógica fundamental. Um baixo desempenho afeta a compreensão da estrutura narrativa e argumentativa, tornando a leitura fragmentada.', connections: { title: 'Conexões', items: ['<strong>Ciências da Natureza:</strong> Analisar relatórios de experimentos (causa: procedimento; consequência: resultado).', '<strong>História:</strong> Estudar eventos históricos e suas consequências.'] }, suggestions: { title: 'Sugestões', items: ['Usar tirinhas sem texto para que os alunos narrem a sequência lógica.', 'Jogos de "E se...?": mudar um evento e discutir as novas consequências.'] } },
            'D12': { title: 'D12 - Identificar a finalidade de textos de diferentes gêneros.', analysis: 'Compreensão do propósito comunicativo (informar, convencer, divertir, etc.). Dificuldade aqui mostra que o aluno lê todos os textos da mesma forma, sem se adaptar ao gênero.', suggestions: { title: 'Sugestões', items: ['Coletar diferentes gêneros (notícia, receita, poema, propaganda) e discutir "para que serve cada um?".', 'Criar textos com finalidades específicas.'] } },
            'D13': { title: 'D13 - Identificar as marcas linguísticas que evidenciam o locutor e o interlocutor.', analysis: 'Percepção da variação linguística (formal/informal, dialetos, jargões). Um problema aqui indica dificuldade em entender quem fala no texto e para quem fala.', suggestions: { title: 'Sugestões', items: ['Analisar diálogos de personagens de diferentes perfis sociais em contos ou HQs.', 'Reescrever um bilhete formal como se fosse uma mensagem de WhatsApp para um amigo.'] } },
            'D14': { title: 'D14 - Distinguir um fato da opinião relativa a esse fato.', analysis: 'Base para o letramento crítico e combate à desinformação. A dificuldade impede o aluno de separar o que é um evento objetivo do que é a interpretação de alguém sobre ele.', connections: { title: 'Conexões', items: ['<strong>Jornalismo/Mídia:</strong> Comparar uma notícia (fato) com um editorial (opinião) sobre o mesmo acontecimento.', '<strong>História:</strong> Analisar um documento histórico (fato) e a interpretação de um historiador sobre ele (opinião).'] }, suggestions: { title: 'Sugestões', items: ['Classificar frases de notícias em "fato" ou "opinião".', 'Debates regrados a partir de um fato, onde os alunos devem expor suas opiniões.'] } },
            'D15': { title: 'D15 - Estabelecer relações lógico-discursivas (conectivos).', analysis: 'Ponto crítico para a construção de sentido. A dificuldade mostra que os alunos não conseguem identificar o papel de conectivos (mas, porque, portanto) para ligar ideias, comprometendo a leitura de textos complexos.', connections: { title: 'Conexões', items: ['<strong>Matemática:</strong> Entender enunciados de problemas que usam "se... então", "e", "ou".', '<strong>Ciências Humanas:</strong> Analisar como autores constroem argumentos de oposição (usando "mas") ou conclusão (usando "logo").'] }, suggestions: { title: 'Sugestões', items: ['"Quebra-cabeça de Frases": entregar parágrafos com as conjunções removidas para os alunos encaixarem.', 'Análise de letras de música, destacando a função dos conectivos.'] } },
            'D16': { title: 'D16 - Identificar efeitos de ironia ou humor em textos variados.', analysis: 'Requer a capacidade de perceber a quebra de expectativa e o não-dito. Dificuldade indica uma leitura excessivamente literal.', suggestions: { title: 'Sugestões', items: ['Análise de memes, charges e tirinhas.', 'Leitura de crônicas de humor (Ex: Luis Fernando Verissimo).'] } },
            'D17': { title: 'D17 - Reconhecer o efeito de sentido decorrente do uso da pontuação e de outras notações.', analysis: 'Avalia a compreensão de que a pontuação não é apenas uma pausa, mas um construtor de sentido. Dificuldades aqui mostram uma leitura mecânica, que não percebe nuances de entonação, ironia ou ênfase dadas por vírgulas, travessões, aspas, etc.', suggestions: { title: 'Sugestões', items: ['Comparar frases com pontuações diferentes (Ex: "Não, espere." vs "Não espere.").', 'Atividade de "pontuar o diálogo": entregar um texto sem pontuação para que os alunos o tornem expressivo.'] } },
            'D18': { title: 'D18 - Reconhecer o efeito de sentido da escolha de uma palavra.', analysis: 'Percepção da semântica e do poder das palavras. O aluno com dificuldade não diferencia o impacto de dizer "casa", "lar", "moradia" ou "barraco".', suggestions: { title: 'Sugestões', items: ['Discutir o efeito de diferentes adjetivos em uma mesma frase.', 'Analisar títulos de notícias para ver como a escolha de palavras influencia o leitor.'] } },
            'D19': { title: 'D19 - Reconhecer o efeito de sentido de recursos ortográficos/morfossintáticos.', analysis: 'Compreensão de como o uso intencional de uma grafia (ex: "kasa" em vez de "casa"), o uso de maiúsculas, repetições ou a ordem das palavras alteram o sentido. Dificuldade indica uma visão mecânica da gramática.', suggestions: { title: 'Sugestões', items: ['Análise de propagandas e posts de redes sociais que usam grafias não convencionais.', 'Análise de poemas concretos.'] } },
            'D20': { title: 'D20 - Reconhecer diferentes formas de tratar uma informação.', analysis: 'Habilidade de comparar textos. O aluno com dificuldade não percebe como o mesmo tema pode ser abordado de formas diferentes dependendo do gênero, autor ou veículo.', suggestions: { title: 'Sugestões', items: ['Comparar uma notícia de portal com um vídeo de opinião no YouTube sobre o mesmo fato.', 'Analisar como diferentes contos de fadas tratam o tema do "bem contra o mal".'] } },
            'D21': { title: 'D21 - Reconhecer posições distintas entre duas ou mais opiniões.', analysis: 'Similar ao D20, mas focado em textos opinativos. Essencial para entender debates e construir a própria argumentação.', suggestions: { title: 'Sugestões', items: ['Ler cartas de leitores em jornais ou comentários em posts com visões opostas.', 'Organizar júris simulados sobre temas polêmicos.'] } },
            
            // --- MATEMÁTICA (ENSINO FUNDAMENTAL) ---
            'D1 (MAT)': { title: 'D1 (MAT) - Identificar a localização/movimentação de objeto em mapas, croquis...', analysis: 'Avalia o senso de espacialidade e a capacidade de interpretar representações do espaço. Dificuldades aqui podem impactar a leitura de mapas e a orientação espacial no dia a dia.', connections: { title: 'Conexões', items: ['<strong>Geografia:</strong> Leitura de mapas, uso de coordenadas e cálculo de rotas.', '<strong>Educação Física:</strong> Criar estratégias em esportes de quadra, planejando a movimentação dos jogadores.'] }, suggestions: { title: 'Sugestões', items: ['Batalha naval em sala de aula.', 'Criar um "mapa do tesouro" da escola ou do bairro.'] } },
            'D2 (MAT)': { title: 'D2 (MAT) - Identificar propriedades comuns e diferenças entre figuras bi e tridimensionais.', analysis: 'Habilidade de visualização espacial e de relacionar objetos 3D com suas representações 2D (planificações). Dificuldades aqui indicam uma lacuna na geometria espacial básica.', connections: { title: 'Conexões', items: ['<strong>Artes:</strong> Construção de maquetes e estudo de sólidos geométricos na escultura.', '<strong>Ciências:</strong> Entender a estrutura de moléculas em 3D.'] }, suggestions: { title: 'Sugestões', items: ['Montar e desmontar caixas para visualizar a planificação.', 'Usar blocos de montar ou softwares de modelagem 3D simples.'] } },
            'D3 (MAT)': { title: 'D3 (MAT) - Identificar propriedades de triângulos pela comparação de medidas de lados e ângulos.', analysis: 'Habilidade fundamental da geometria. Um baixo desempenho indica dificuldade em classificar e comparar formas, o que é base para conceitos mais complexos como congruência e semelhança.', suggestions: { title: 'Sugestões', items: ['Construção de triângulos com canudos ou palitos para explorar as propriedades (ex: condição de existência).', 'Caça a triângulos (isósceles, equiláteros, escalenos) na arquitetura da escola.'] } },
            'D6 (MAT)': { title: 'D6 (MAT) - Reconhecer ângulos como mudança de direção ou giros...', analysis: 'Conceito de ângulo de forma dinâmica. A dificuldade aqui mostra uma visão estática do ângulo, sem entender sua aplicação em movimento, o que é crucial para a robótica e a programação.', connections: { title: 'Conexões', items: ['<strong>Educação Física:</strong> Analisar os ângulos de arremessos ou chutes.', '<strong>Artes:</strong> Explorar giros e rotações em desenhos e esculturas.'] }, suggestions: { title: 'Sugestões', items: ['Usar o próprio corpo para representar giros de 90°, 180°, 360°.', 'Programação em blocos (Scratch) para movimentar personagens usando ângulos.'] } },
            'D10 (MAT)': { title: 'D10 (MAT) - Utilizar relações métricas do triângulo retângulo para resolver problemas.', analysis: 'Aplicação do Teorema de Pitágoras e outras relações. Um baixo desempenho indica dificuldade em aplicar um conceito matemático abstrato a situações práticas (calcular distâncias, alturas).', connections: { title: 'Conexões', items: ['<strong>Ciências:</strong> Calcular o deslocamento de um objeto em um plano inclinado.', '<strong>Artes/Construção Civil:</strong> Verificar se uma estrutura está no esquadro (ângulo de 90°).'] }, suggestions: { title: 'Sugestões', items: ['Medir a sombra de um poste e a altura de um aluno para calcular a altura do poste por semelhança de triângulos.', 'Construir rampas e calcular suas medidas.'] } },
            'D12 (MAT)': { title: 'D12 (MAT) - Resolver problema envolvendo o cálculo de perímetro de figuras planas.', analysis: 'Diferente da área, o perímetro avalia a compreensão do contorno de uma figura. Dificuldades podem indicar confusão entre os conceitos de área e perímetro.', suggestions: { title: 'Sugestões', items: ['Medir o perímetro de objetos reais na sala de aula com barbante e régua.', 'Criar diferentes retângulos com o mesmo perímetro, mas áreas diferentes.'] } },
            'D13 (MAT)': { title: 'D13 (MAT) - Resolver problema envolvendo o cálculo de área de figuras planas.', analysis: 'A dificuldade em calcular áreas pode ir além da simples aplicação de fórmulas, revelando fragilidade na visualização espacial. É uma habilidade essencial para diversas aplicações práticas.', connections: { title: 'Conexões', items: ['<strong>Geografia:</strong> Calcular a área de regiões em mapas.', '<strong>Artes:</strong> Planejar mosaicos, calculando a quantidade de material.'] }, suggestions: { title: 'Sugestões', items: ['Usar papel quadriculado para cobrir figuras e construir o conceito de área de forma concreta.', 'Projeto "Arquiteto por um dia": calcular a área dos cômodos de uma planta baixa.'] } },
            'D16 (MAT)': { title: 'D16 (MAT) - Identificar a localização de números inteiros na reta numérica.', analysis: 'Base para a compreensão dos números negativos. Dificuldades aqui indicam problemas em entender o conceito de números opostos e a ordem no conjunto dos inteiros.', suggestions: { title: 'Sugestões', items: ['Usar termômetros para discutir temperaturas positivas e negativas.', 'Criar uma linha do tempo em História com anos A.C. e D.C.'] } },
            'D17 (MAT)': { title: 'D17 (MAT) - Identificar a localização de números racionais na reta numérica.', analysis: 'Habilidade crucial para entender a ordem e a densidade dos números racionais. Um baixo desempenho indica que o aluno pode não compreender o que um decimal ou uma fração realmente representa em termos de magnitude.', suggestions: { title: 'Sugestões', items: ['Criar uma "reta numérica humana" no pátio da escola.', 'Jogo de "cartas na reta": sortear frações e decimais para os alunos posicionarem em uma reta desenhada.'] } },
            'D18 (MAT)': { title: 'D18 (MAT) - Efetuar cálculos com números inteiros.', analysis: 'Base da aritmética. Dificuldades com as quatro operações (especialmente com as regras de sinais na multiplicação/divisão) comprometem quase todos os outros conteúdos de matemática.', suggestions: { title: 'Sugestões', items: ['Usar a reta numérica para visualizar adições e subtrações.', 'Jogos de tabuleiro onde se ganha/perde pontos para praticar as operações.'] } },
            'D20 (MAT)': { title: 'D20 (MAT) - Resolver problema com números inteiros envolvendo as operações.', analysis: 'É a aplicação do D18. O aluno pode saber a regra de sinal, mas não consegue interpretar um problema de saldo bancário ou variação de temperatura.', suggestions: { title: 'Sugestões', items: ['Analisar extratos bancários fictícios.', 'Resolver problemas sobre altitudes (acima e abaixo do nível do mar).'] } },
            'D23 (MAT)': { title: 'D23 (MAT) - Identificar frações equivalentes.', analysis: 'Conceito fundamental para simplificar frações e realizar operações. A dificuldade aqui mostra uma compreensão superficial de que frações diferentes podem representar a mesma quantidade.', suggestions: { title: 'Sugestões', items: ['Uso de discos ou tiras de fração para visualizar a equivalência.', 'Jogo da memória com pares de frações equivalentes.'] } },
            'D24 (MAT)': { title: 'D24 (MAT) - Reconhecer as representações decimais dos números racionais.', analysis: 'Tradução entre fração e decimal. Dificuldades aqui mostram que o aluno não conecta a ideia de 1/2 com 0,5, o que é essencial para o uso de calculadoras e para o sistema monetário.', suggestions: { title: 'Sugestões', items: ['Relacionar frações com dinheiro (ex: R$ 0,25 é 1/4 de real).', 'Fazer competições de transformar frações em decimais e vice-versa.'] } },
            'D25 (MAT)': { title: 'D25 (MAT) - Efetuar cálculos com números racionais.', analysis: 'Operações com frações e decimais. É um dos maiores desafios do Ensino Fundamental. Dificuldades aqui impactam desde a resolução de problemas simples até a álgebra.', suggestions: { title: 'Sugestões', items: ['Usar receitas de bolo, pedindo para dobrar ou dividir os ingredientes pela metade.', 'Resolver problemas de finanças pessoais com valores decimais.'] } },
            'D26 (MAT)': { title: 'D26 (MAT) - Resolver problema com números racionais envolvendo as operações.', analysis: 'É a aplicação do D25. O aluno pode saber fazer a conta, mas não sabe qual operação usar em um problema. Avalia a interpretação do enunciado.', suggestions: { title: 'Sugestões', items: ['Focar na interpretação de enunciados, pedindo que os alunos primeiro identifiquem a operação necessária antes de calcular.', 'Criar seus próprios problemas envolvendo frações e decimais.'] } },
            'D28 (MAT)': { title: 'D28 (MAT) - Resolver problema que envolva porcentagem.', analysis: 'Habilidade extremamente prática. Dificuldades aqui afetam o letramento financeiro e a capacidade de interpretar notícias e promoções.', connections: { title: 'Conexões', items: ['<strong>Ciências Humanas:</strong> Analisar dados estatísticos de pesquisas de opinião ou censos.', '<strong>Ciências da Natureza:</strong> Calcular a composição percentual de uma mistura.'] }, suggestions: { title: 'Sugestões', items: ['Simular situações de compra com descontos e acréscimos.', 'Analisar rótulos de alimentos e calcular a porcentagem de cada nutriente.'] } },
            'D29 (MAT)': { title: 'D29 (MAT) - Resolver problema que envolva variação proporcional.', analysis: 'Compreensão de regra de três, direta ou inversa. Essencial para a resolução de problemas em diversas áreas do conhecimento.', connections: { title: 'Conexões', items: ['<strong>Física/Química:</strong> Relações entre grandezas como velocidade/tempo, massa/volume.', '<strong>Geografia:</strong> Escalas de mapas.'] }, suggestions: { title: 'Sugestões', items: ['Planejar uma viagem, calculando o tempo necessário com base na velocidade média.', 'Ampliar ou reduzir desenhos usando proporções.'] } },
            'D31 (MAT)': { title: 'D31 (MAT) - Resolver problema que envolva equação do 2º grau.', analysis: 'Aplicação da fórmula de Bhaskara. A dificuldade pode estar tanto na aplicação da fórmula quanto na interpretação do problema para montar a equação.', suggestions: { title: 'Sugestões', items: ['Resolver problemas de otimização de área (ex: qual o maior cercado possível com uma certa quantidade de tela?).', 'Explorar a trajetória de objetos (parábolas) em vídeos ou simulações.'] } },
            'D33 (MAT)': { title: 'D33 (MAT) - Identificar uma equação ou inequação do 1º grau que expressa um problema.', analysis: 'Tradução da linguagem verbal para a linguagem algébrica. É um passo fundamental para a resolução de problemas. Dificuldades aqui mostram que o aluno não consegue modelar matematicamente uma situação.', suggestions: { title: 'Sugestões', items: ['Apresentar problemas e pedir apenas para que escrevam a equação, sem resolver.', 'Jogo "Adivinhe meu número" para praticar a montagem de equações.'] } },
            'D34 (MAT)': { title: 'D34 (MAT) - Identificar um sistema de equações do 1º grau que expressa um problema.', analysis: 'Similar ao D33, mas com duas variáveis. Avalia a capacidade de identificar duas condições diferentes em um mesmo problema e traduzi-las para a linguagem matemática.', suggestions: { title: 'Sugestões', items: ['Resolver problemas clássicos como "em um estacionamento há carros e motos..." focando na montagem do sistema.', 'Usar balanças de dois pratos para representar visualmente as equações.'] } },
            'D35 (MAT)': { title: 'D35 (MAT) - Identificar a relação entre as representações algébrica e geométrica de um sistema.', analysis: 'Conexão entre álgebra e geometria. O aluno precisa entender que a solução de um sistema de equações é o ponto de encontro de duas retas no plano cartesiano. Dificuldade aqui indica uma visão fragmentada da matemática.', suggestions: { title: 'Sugestões', items: ['Usar softwares como o GeoGebra para visualizar os gráficos das equações e encontrar a solução.', 'Resolver um sistema algebricamente e depois construir o gráfico para confirmar a resposta.'] } },
            'D36 (MAT)': { title: 'D36 (MAT) - Resolver problema envolvendo informações apresentadas em tabelas e/ou gráficos.', analysis: 'Letramento estatístico. Avalia a capacidade de ler, interpretar e usar dados apresentados visualmente. É uma habilidade essencial para o exercício da cidadania.', connections: { title: 'Conexões', items: ['<strong>Ciências Humanas:</strong> Interpretar gráficos de pirâmides etárias, dados econômicos e resultados de eleições.', '<strong>Ciências da Natureza:</strong> Analisar gráficos de crescimento de populações ou resultados de experimentos.'] }, suggestions: { title: 'Sugestões', items: ['Usar notícias de jornais e revistas que contenham gráficos para discussão.', 'Realizar pesquisas na própria turma e construir os gráficos para representar os dados.'] } },
            'D37 (MAT)': { title: 'D37 (MAT) - Associar informações de listas/tabelas a gráficos e vice-versa.', analysis: 'Habilidade de traduzir dados entre diferentes formatos. Dificuldades aqui mostram que o aluno pode não entender que uma tabela e um gráfico de barras podem estar mostrando exatamente a mesma informação, apenas de formas diferentes.', connections: { title: 'Conexões', items: ['<strong>Geografia:</strong> Transformar uma tabela de dados populacionais em um gráfico de barras.', '<strong>Ciências:</strong> Pegar os dados de um experimento anotados em uma lista e construir um gráfico de linhas para ver a tendência.'] }, suggestions: { title: 'Sugestões', items: ['Entregar um gráfico pronto e pedir para os alunos criarem a tabela que o originou.', 'Fazer uma pesquisa (ex: time de futebol preferido) e pedir que os alunos representem o resultado em uma tabela e em um gráfico de pizza.'] } },
            
            // --- MATEMÁTICA (ENSINO MÉDIO) ---
            'D6 (MAT-EM)': { title: 'D6 (MAT-EM) - Identificar a localização de pontos no plano cartesiano.', analysis: 'Fundamental para a geometria analítica e o estudo de funções. Dificuldades indicam problemas com o sistema de coordenadas, essencial para a representação gráfica de fenômenos.', connections: { title: 'Conexões', items: ['<strong>Geografia:</strong> Uso de latitude e longitude.', '<strong>Física:</strong> Construção de gráficos de posição vs. tempo.'] }, suggestions: { title: 'Sugestões', items: ['Jogo de batalha naval gigante no pátio.', 'Usar o GeoGebra para explorar a relação entre pares ordenados e pontos.'] } },
            'D14 (MAT-EM)': { title: 'D14 (MAT-EM) - Identificar a localização de números reais na reta numérica.', analysis: 'Habilidade crucial para entender a ordem, a densidade e a continuidade dos números reais. Um baixo desempenho indica que o aluno pode não compreender o que um número irracional (como π ou √2) representa em termos de magnitude.', suggestions: { title: 'Sugestões', items: ['Criar uma "reta numérica humana" no pátio da escola, incluindo cartões com números irracionais.', 'Discutir a irracionalidade de √2 através de construções geométricas.'] } },
            'D16 (MAT-EM)': { title: 'D16 (MAT-EM) - Resolver problema que envolva porcentagem.', analysis: 'Habilidade extremamente prática. Dificuldades aqui afetam o letramento financeiro e a capacidade de interpretar notícias e promoções.', connections: { title: 'Conexões', items: ['<strong>Ciências Humanas:</strong> Analisar dados estatísticos de pesquisas de opinião ou censos.', '<strong>Química:</strong> Calcular a composição percentual de uma mistura.'] }, suggestions: { title: 'Sugestões', items: ['Simular situações de compra com descontos e juros compostos.', 'Analisar notícias econômicas sobre inflação e reajustes.'] } },
            'D34 (MAT-EM)': { title: 'D34 (MAT-EM) - Resolver problema envolvendo informações apresentadas em tabelas e/ou gráficos.', analysis: 'Letramento estatístico avançado. Avalia a capacidade de ler, interpretar e usar dados apresentados visualmente para tomar decisões e fazer inferências.', connections: { title: 'Conexões', items: ['<strong>Ciências Humanas:</strong> Interpretar gráficos de pirâmides etárias, dados econômicos e resultados de eleições.', '<strong>Biologia:</strong> Analisar gráficos de crescimento de populações ou resultados de experimentos.'] }, suggestions: { title: 'Sugestões', items: ['Usar notícias de jornais e revistas que contenham gráficos para discussão e análise crítica.', 'Realizar pesquisas na própria turma e construir os gráficos para representar os dados.'] } },
            'D31 (MAT-EM)': { title: 'D31 (MAT-EM) - Determinar a solução de um sistema linear associando-o a uma matriz.', analysis: 'Conexão entre álgebra linear e sistemas. Dificuldades aqui mostram uma lacuna na capacidade de organizar informações de forma matricial e aplicar métodos como o escalonamento.', connections: { title: 'Conexões', items: ['<strong>Computação:</strong> Matrizes são a base para processamento de imagens e computação gráfica.', '<strong>Economia:</strong> Modelagem de problemas com múltiplas variáveis.'] }, suggestions: { title: 'Sugestões', items: ['Resolver o mesmo sistema por métodos diferentes (substituição, adição, escalonamento) e comparar.', 'Usar planilhas eletrônicas para resolver sistemas maiores.'] } },
            'D19 (MAT-EM)': { title: 'D19 (MAT-EM) - Resolver problema envolvendo uma função do 1º grau.', analysis: 'Aplicação prática de funções lineares. Dificuldades indicam que o aluno pode saber a fórmula y=ax+b, mas não consegue aplicá-la em situações como cálculo de custos, distâncias ou outras relações diretamente proporcionais.', connections: { title: 'Conexões', items: ['<strong>Física:</strong> Movimento uniforme (S = S0 + vt).', '<strong>Química:</strong> Relações de concentração e diluição.'] }, suggestions: { title: 'Sugestões', items: ['Analisar contas de luz ou água para identificar a parte fixa e a variável.', 'Simular planos de telefonia para encontrar o mais vantajoso.'] } },
            'D2 (MAT-EM)': { title: 'D2 (MAT-EM) - Reconhecer aplicações das relações métricas do triângulo retângulo.', analysis: 'Aplicação do Teorema de Pitágoras e da trigonometria básica (seno, cosseno, tangente) em problemas práticos. Dificuldade indica uma falha em transpor o conceito para o mundo real.', connections: { title: 'Conexões', items: ['<strong>Física:</strong> Decomposição de vetores.', '<strong>Geografia:</strong> Calcular a altura de um relevo ou a largura de um rio.'] }, suggestions: { title: 'Sugestões', items: ['Usar teodolitos caseiros para medir alturas de prédios ou árvores.', 'Resolver problemas de navegação e aviação.'] } },
            'D23 (MAT-EM)': { title: 'D23 (MAT-EM) - Reconhecer o gráfico de uma função polinomial de 1º grau.', analysis: 'Conexão entre a expressão algébrica y=ax+b e sua representação geométrica, a reta. Dificuldades indicam uma separação entre álgebra e geometria na mente do aluno.', suggestions: { title: 'Sugestões', items: ['Explorar o que acontece com a reta quando se muda o coeficiente angular (a) e o linear (b) no GeoGebra.', 'Dar gráficos de retas e pedir para os alunos encontrarem a função correspondente.'] } },
            'D18 (MAT-EM)': { title: 'D18 (MAT-EM) - Reconhecer expressão algébrica que representa uma função a partir de uma tabela.', analysis: 'Habilidade de identificar padrões e generalizar. O aluno precisa olhar para uma tabela de valores (x, y) e induzir a regra (a função) que os relaciona. Dificuldade aqui impacta o pensamento algébrico.', suggestions: { title: 'Sugestões', items: ['Apresentar sequências numéricas e pedir para os alunos encontrarem a "lei de formação".', 'Usar tabelas de experimentos de ciências e tentar encontrar a função que modela o fenômeno.'] } },
            'D5 (MAT-EM)': { title: 'D5 (MAT-EM) - Resolver problema que envolva razões trigonométricas no triângulo retângulo.', analysis: 'Aplicação de seno, cosseno e tangente. É um aprofundamento do D2, focando no cálculo de lados e ângulos. Dificuldades são comuns e precisam de muita prática contextualizada.', suggestions: { title: 'Sugestões', items: ['Construir rampas e calcular seus ângulos de inclinação.', 'Resolver quebra-cabeças geométricos que envolvam trigonometria.'] } },
            'D21 (MAT-EM)': { title: 'D21 (MAT-EM) - Identificar o gráfico que representa uma situação descrita em um texto.', analysis: 'Tradução da linguagem verbal para a visual. O aluno precisa ler uma história (ex: um carro acelera, mantém a velocidade e depois freia) e escolher o gráfico que melhor a representa. Dificuldade indica problemas de interpretação.', suggestions: { title: 'Sugestões', items: ['Criar "histórias em gráficos": os alunos desenham um gráfico para representar uma pequena narrativa.', 'Analisar gráficos de notícias e discutir o que eles representam.'] } },
            'D1 (MAT-EM)': { title: 'D1 (MAT-EM) - Identificar figuras semelhantes mediante o reconhecimento de relações de proporcionalidade.', analysis: 'Base para o Teorema de Tales e a semelhança de triângulos. Dificuldades indicam que o aluno não compreende o que significa "ter a mesma forma, mas tamanhos diferentes".', connections: { title: 'Conexões', items: ['<strong>Artes:</strong> Ampliação e redução de desenhos.', '<strong>Geografia:</strong> Entender o conceito de escala em mapas.'] }, suggestions: { title: 'Sugestões', items: ['Usar projetores para explorar a semelhança entre o objeto e sua imagem projetada.', 'Fotografar objetos de diferentes distâncias e comparar as semelhanças.'] } },
            'D17 (MAT-EM)': { title: 'D17 (MAT-EM) - Resolver problema envolvendo equação do 2º grau.', analysis: 'Aplicação da fórmula de Bhaskara. A dificuldade pode estar tanto na aplicação da fórmula quanto na interpretação do problema para montar a equação.', suggestions: { title: 'Sugestões', items: ['Resolver problemas de otimização de área (ex: qual o maior cercado possível com uma certa quantidade de tela?).', 'Explorar a trajetória de objetos (parábolas) em vídeos ou simulações.'] } },
            'D15 (MAT-EM)': { title: 'D15 (MAT-EM) - Resolver problema que envolva variação proporcional, direta ou inversa.', analysis: 'Compreensão de regra de três. Essencial para a resolução de problemas em diversas áreas do conhecimento.', connections: { title: 'Conexões', items: ['<strong>Física/Química:</strong> Relações entre grandezas como velocidade/tempo, massa/volume.', '<strong>Geografia:</strong> Escalas de mapas.'] }, suggestions: { title: 'Sugestões', items: ['Planejar uma viagem, calculando o tempo necessário com base na velocidade média.', 'Ampliar ou reduzir desenhos usando proporções.'] } },
            'D20 (MAT-EM)': { title: 'D20 (MAT-EM) - Analisar crescimento/decrescimento, zeros de funções reais apresentadas em gráficos.', analysis: 'Leitura e interpretação de gráficos de funções. O aluno precisa saber "ler" o gráfico para identificar onde a função sobe, desce ou corta o eixo x. Essencial para a análise de fenômenos.', suggestions: { title: 'Sugestões', items: ['Analisar gráficos da bolsa de valores para identificar períodos de alta e baixa.', 'Esboçar gráficos de situações cotidianas (ex: altura da água enchendo uma caixa).'] } },
            'D4 (MAT-EM)': { title: 'D4 (MAT-EM) - Identificar a relação entre o número de vértices, faces e/ou arestas de poliedros.', analysis: 'Relação de Euler. Avalia a capacidade de identificar padrões em sólidos geométricos. Dificuldade indica uma lacuna na visualização espacial e na generalização de propriedades.', suggestions: { title: 'Sugestões', items: ['Construir poliedros com canudos e massinha para contar vértices, faces e arestas e testar a Relação de Euler.', 'Usar modelos de poliedros de Platão.'] } },
            'D9 (MAT-EM)': { title: 'D9 (MAT-EM) - Relacionar a determinação do ponto de interseção de duas ou mais retas com a resolução de um sistema de equações.', analysis: 'Conexão entre álgebra e geometria. O aluno precisa entender que a solução de um sistema de equações é o ponto de encontro das retas no plano cartesiano. Dificuldade aqui indica uma visão fragmentada da matemática.', suggestions: { title: 'Sugestões', items: ['Usar softwares como o GeoGebra para visualizar os gráficos das equações e encontrar a solução.', 'Resolver um sistema algebricamente e depois construir o gráfico para confirmar a resposta.'] } },
            'D25 (MAT-EM)': { title: 'D25 (MAT-EM) - Resolver problemas que envolvem os pontos de máximo ou de mínimo no gráfico de uma função polinomial do 2º grau.', analysis: 'Aplicação do vértice da parábola. Dificuldade indica que o aluno não consegue aplicar o conceito para resolver problemas de otimização (lucro máximo, altura máxima, etc.).', connections: { title: 'Conexões', items: ['<strong>Física:</strong> Lançamento de projéteis para encontrar a altura máxima.', '<strong>Economia:</strong> Encontrar o preço que maximiza o lucro de um produto.'] }, suggestions: { title: 'Sugestões', items: ['Resolver problemas práticos de otimização.', 'Usar simulações para visualizar o ponto de máximo/mínimo.'] } },
            'D22 (MAT-EM)': { title: 'D22 (MAT-EM) - Resolver problema envolvendo P.A./P.G. dada a fórmula do termo geral.', analysis: 'Aplicação de sequências. Dificuldade indica problemas em entender o conceito de padrão e regularidade, que é a base do pensamento algébrico.', connections: { title: 'Conexões', items: ['<strong>Educação Financeira:</strong> Calcular juros simples (P.A.) e compostos (P.G.).', '<strong>Biologia:</strong> Modelar o crescimento de uma população de bactérias (P.G.).'] }, suggestions: { title: 'Sugestões', items: ['Analisar padrões em mosaicos e obras de arte.', 'Investigar o problema da invenção do xadrez (P.G.).'] } },
            'D32 (MAT-EM)': { title: 'D32 (MAT-EM) - Resolver problema de contagem utilizando o princípio multiplicativo ou noções de permutação, arranjo, simples e/ou combinação simples.', analysis: 'Base da análise combinatória. Dificuldade indica problemas em diferenciar os tipos de agrupamentos e em aplicar o princípio fundamental da contagem.', suggestions: { title: 'Sugestões', items: ['Resolver problemas de "quantas senhas são possíveis?" ou "de quantas formas podemos formar um pódio?".', 'Criar cardápios e calcular o número de refeições possíveis.'] } },
            'D11 (MAT-EM)': { title: 'D11 (MAT-EM) - Resolver problema envolvendo o cálculo de perímetro de figuras planas.', analysis: 'Diferente da área, o perímetro avalia a compreensão do contorno de uma figura. Dificuldades podem indicar confusão entre os conceitos de área e perímetro.', suggestions: { title: 'Sugestões', items: ['Medir o perímetro de objetos reais na sala de aula com barbante e régua.', 'Criar diferentes retângulos com o mesmo perímetro, mas áreas diferentes.'] } },
            'D24 (MAT-EM)': { title: 'D24 (MAT-EM) - Reconhecer a representação algébrica de uma função do 1º grau dado o seu gráfico.', analysis: 'É o caminho inverso do D23. O aluno precisa olhar para a reta e ser capaz de determinar sua equação. Avalia a compreensão dos coeficientes angular e linear.', suggestions: { title: 'Sugestões', items: ['Dar gráficos de retas e pedir para os alunos encontrarem a função correspondente.', 'Analisar gráficos de situações reais (como custo de uma corrida de táxi) e determinar a função.'] } },
            'D29 (MAT-EM)': { title: 'D29 (MAT-EM) - Resolver problema que envolva função exponencial.', analysis: 'Modelagem de crescimento ou decaimento rápido. Dificuldades aqui impactam a compreensão de fenômenos como juros compostos, crescimento populacional ou decaimento radioativo.', connections: { title: 'Conexões', items: ['<strong>Biologia:</strong> Crescimento de colônias de bactérias.', '<strong>Química:</strong> Decaimento radioativo e meia-vida.'] }, suggestions: { title: 'Sugestões', items: ['Simular investimentos com juros compostos.', 'Discutir a propagação de notícias (virais) nas redes sociais.'] } },
            'D12 (MAT-EM)': { title: 'D12 (MAT-EM) - Resolver problema envolvendo o cálculo de área de figuras planas.', analysis: 'A dificuldade em calcular áreas pode ir além da simples aplicação de fórmulas, revelando fragilidade na visualização espacial. É uma habilidade essencial para diversas aplicações práticas.', connections: { title: 'Conexões', items: ['<strong>Geografia:</strong> Calcular a área de regiões em mapas.', '<strong>Artes:</strong> Planejar mosaicos, calculando a quantidade de material.'] }, suggestions: { title: 'Sugestões', items: ['Usar papel quadriculado para cobrir figuras e construir o conceito de área de forma concreta.', 'Projeto "Arquiteto por um dia": calcular a área dos cômodos de uma planta baixa.'] } },
            'D8 (MAT-EM)': { title: 'D8 (MAT-EM) - Identificar a equação de uma reta apresentada a partir de dois pontos dados ou de um ponto e sua inclinação.', analysis: 'Habilidade fundamental da geometria analítica. Dificuldade indica uma desconexão entre os elementos geométricos (pontos, inclinação) e sua representação algébrica (a equação da reta).', suggestions: { title: 'Sugestões', items: ['Usar o GeoGebra para construir retas a partir de dois pontos e observar a equação gerada.', 'Resolver problemas de interpolação e extrapolação linear.'] } },
            'default': { title: 'Análise Padrão', analysis: 'Este descritor não possui uma análise pré-definida. A dificuldade indica uma lacuna na habilidade correspondente, que precisa ser investigada e trabalhada com a turma.', suggestions: { title: 'Sugestões', items: ['Utilize metodologias ativas.', 'Promova trabalhos em grupo.'] } }
        };

        // --- ELEMENTOS DO DOM ---
        const anoSelect = document.getElementById('anoSelect');
        const turmaSelect = document.getElementById('turmaSelect');
        const disciplinaSelect = document.getElementById('disciplinaSelect');
        const analyzeBtn = document.getElementById('analyzeBtn');
        const resultsSection = document.getElementById('results-section');
        const analysisContainer = document.getElementById('analysis-container');
        const messageDiv = document.getElementById('message-div');
        const messageTitle = document.getElementById('message-title');
        const messageText = document.getElementById('message-text');
        const chartTitle = document.getElementById('chart-title');
        
        let saebChart = null;

        // --- FUNÇÕES ---
        function updateTurmaDropdown() {
            const selectedAno = anoSelect.value;
            turmaSelect.innerHTML = ''; // Limpa as opções atuais

            const turmas = selectedAno === '9ano' 
                ? [{value: 'turma1', text: 'Turma 1'}, {value: 'turma2', text: 'Turma 2'}, {value: 'turma3', text: 'Turma 3'}, {value: 'turma4', text: 'Turma 4'}]
                : [{value: 'turma1', text: 'Turma 1'}, {value: 'turma2', text: 'Turma 2'}, {value: 'turma3', text: 'Turma 3'}];
            
            turmas.forEach(turma => {
                const option = document.createElement('option');
                option.value = turma.value;
                option.textContent = turma.text;
                turmaSelect.appendChild(option);
            });
        }

        function showMessage(type, title, message) {
            messageDiv.classList.remove('hidden', 'bg-red-100', 'border-red-500', 'text-red-700', 'bg-yellow-100', 'border-yellow-500', 'text-yellow-700');
            if (type === 'error') {
                messageDiv.classList.add('bg-red-100', 'border-red-500', 'text-red-700');
            } else { // 'warning'
                messageDiv.classList.add('bg-yellow-100', 'border-yellow-500', 'text-yellow-700');
            }
            messageTitle.innerText = title;
            messageText.innerText = message;
        }

        function hideMessage() {
            messageDiv.classList.add('hidden');
        }

        function handleAnalysis() {
            hideMessage();
            const ano = anoSelect.value;
            const turma = turmaSelect.value;
            const disciplina = disciplinaSelect.value;
            
            const data = allData[ano]?.[disciplina]?.[turma];

            if (data && data.length > 0) {
                processData(data, ano, turma, disciplina);
                resultsSection.classList.remove('hidden');
            } else {
                resultsSection.classList.add('hidden');
                showMessage('warning', 'Dados não disponíveis', 'Ainda não há dados para a seleção informada. Por favor, carregue os resultados correspondentes.');
            }
        }

        function processData(data, ano, turma, disciplina) {
            try {
                const originalData = [...data];

                const labels = originalData.map(item => item.descritor.toUpperCase());
                const percentages = originalData.map(item => parseFloat(item.percentual));

                const backgroundColors = percentages.map(p => {
                    if (p <= 40) return '#ef4444'; // Vermelho (Baixo)
                    if (p <= 60) return '#f59e0b'; // Amarelo (Básico)
                    if (p <= 80) return '#22c55e'; // Verde (Proficiente)
                    return '#3b82f6'; // Azul (Avançado)
                });
                
                const anoText = ano === '9ano' ? '9º Ano' : '3º Ano';
                const turmaText = `Turma ${turma.replace('turma', '')}`;
                const disciplinaText = disciplina === 'lp' ? 'Língua Portuguesa' : 'Matemática';
                chartTitle.innerText = `Desempenho por Habilidade - ${anoText} | ${turmaText} | ${disciplinaText}`;

                renderChart(labels, percentages, backgroundColors);
                renderAnalysis(originalData, disciplina, ano);

            } catch (e) {
                showMessage('error', 'Erro ao Processar Dados', 'Ocorreu um erro inesperado. Verifique se os dados no sistema estão corretos.');
                console.error(e);
            }
        }

        function renderChart(labels, data, backgroundColors) {
            const ctx = document.getElementById('saebChart').getContext('2d');
            if (saebChart) saebChart.destroy();

            saebChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '% de Acertos',
                        data: data,
                        backgroundColor: backgroundColors,
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: { beginAtZero: true, max: 100, title: { display: true, text: 'Percentual de Acertos (%)' } },
                        y: { 
                            title: { display: true, text: 'Descritores' },
                            reverse: true
                        }
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` Acertos: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function renderAnalysis(data, disciplina, ano) {
            analysisContainer.innerHTML = '';
            
            const baixo = data.filter(item => parseFloat(item.percentual) <= 40);
            const basico = data.filter(item => parseFloat(item.percentual) > 40 && parseFloat(item.percentual) <= 60);
            
            baixo.sort((a,b) => a.percentual - b.percentual);
            basico.sort((a,b) => a.percentual - b.percentual);

            let html = '';

            if (baixo.length > 0) {
                html += `<h3 class="text-xl font-bold text-baixo mb-4">Nível Baixo (Vermelho)</h3>`;
                baixo.forEach(item => {
                    const analysisData = findAnalysisData(item.descritor, disciplina, ano);
                    html += generateAnalysisBlock(item, analysisData, 'baixo');
                });
            }

            if (basico.length > 0) {
                html += `<h3 class="text-xl font-bold text-basico mt-8 mb-4">Nível Básico (Amarelo)</h3>`;
                basico.forEach(item => {
                    const analysisData = findAnalysisData(item.descritor, disciplina, ano);
                    html += generateAnalysisBlock(item, analysisData, 'basico');
                });
            }
            
            if (baixo.length === 0 && basico.length === 0) {
                html = `<div class="text-center p-6 bg-blue-50 border border-blue-200 rounded-lg">
                            <h3 class="text-xl font-semibold text-blue-800">Excelente Desempenho!</h3>
                            <p class="text-blue-700 mt-2">Nenhum descritor foi classificado nos níveis Baixo ou Básico. O foco pode ser em manter e aprimorar os níveis Proficiente e Avançado.</p>
                        </div>`;
            }

            analysisContainer.innerHTML = html;
        }

        function findAnalysisData(descritor, disciplina, ano) {
            let key = descritor;
            if (disciplina === 'mat') {
                key = ano === '3ano' ? `${descritor} (MAT-EM)` : `${descritor} (MAT)`;
            }
            return pedagogicalAnalysis[key] || pedagogicalAnalysis[descritor] || pedagogicalAnalysis['default'];
        }


        function generateAnalysisBlock(item, analysisData, type) {
            const borderColorClass = type === 'baixo' ? 'border-baixo' : 'border-basico';
            
            let block = `<div class="border-l-4 ${borderColorClass} pl-4 mb-8 break-inside-avoid">`;
            
            block += `<h4 class="text-lg font-semibold">${analysisData.title} <span class="text-sm font-normal text-gray-500">- ${item.percentual}% de acertos</span></h4>`;
            block += `<p class="mt-2 text-gray-700">${analysisData.analysis}</p>`;
            
            if (analysisData.connections) {
                 block += `<div class="mt-4">
                        <h5 class="font-semibold">Conexões Interdisciplinares</h5>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-600">
                            ${analysisData.connections.items.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                      </div>`;
            }
                      
            block += `<div class="mt-4">
                        <h5 class="font-semibold">${analysisData.suggestions.title}</h5>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-600">
                            ${analysisData.suggestions.items.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                      </div>`;

            block += `</div>`;
            return block;
        }

        // --- INICIALIZAÇÃO ---
        document.addEventListener('DOMContentLoaded', () => {
            updateTurmaDropdown();
            handleAnalysis(); // Carrega a análise inicial
        });

        analyzeBtn.addEventListener('click', handleAnalysis);
        anoSelect.addEventListener('change', updateTurmaDropdown);

    </script>
</body>
</html>
